<!-- Inclui o header padrão (evita repetir o cabeçalho em todas as páginas) -->
<%- include("../partials/header") %>

<div class="container mt-5">

    <!-- Título principal do dashboard -->
    <h1 class="mb-4 text-center">Dashboard de Estatísticas</h1>

    <!-- Card: Total de vendas -->
    <div class="row g-4 mb-4">
        <div class="col-md-4">
            <div class="card shadow-sm text-center">
                <div class="card-body">
                    <h5 class="card-title">Total de Vendas</h5>
                    <p class="card-text fs-3"><%= totalVendas %></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Tabela de vendas por filme -->
    <h4>Vendas por Filme</h4>
    <div class="table-responsive">
        <table class="table table-striped table-bordered align-middle">
            <thead class="table-dark">
            <tr>
                <th>Filme</th>
                <th>Quantidade de Vendas</th>
                <th>Percentual</th>
            </tr>
            </thead>

            <tbody>
            <% filmesStats.forEach(f => { %>
                <tr>
                    <td><%= f.filme %></td>
                    <td><%= f.count %></td>
                    <td><%= f.percentual %> %</td>
                </tr>
            <% }) %>
            </tbody>
        </table>
    </div>

    <!-- Sessões mais e menos ocupadas -->
    <div class="row g-4 mt-4">

        <!-- Sessão mais ocupada -->
        <div class="col-md-6">
            <div class="card shadow-sm">
                <div class="card-body text-center">
                    <h5 class="card-title">Sessão Mais Ocupada</h5>
                    <% if (maisOcupada) { %>
                        <p class="fs-5">
                            <%= maisOcupada.sessao %> - <%= maisOcupada.count %> ingressos vendidos
                        </p>
                    <% } else { %>
                        <p>Nenhuma venda registrada</p>
                    <% } %>
                </div>
            </div>
        </div>

        <!-- Sessão menos ocupada -->
        <div class="col-md-6">
            <div class="card shadow-sm">
                <div class="card-body text-center">
                    <h5 class="card-title">Sessão Menos Ocupada</h5>
                    <% if (menosOcupada) { %>
                        <p class="fs-5">
                            <%= menosOcupada.sessao %> - <%= menosOcupada.count %> ingressos vendidos
                        </p>
                    <% } else { %>
                        <p>Nenhuma venda registrada</p>
                    <% } %>
                </div>
            </div>
        </div>

    </div>

</div>

<!-- Inclui o footer padrão (mantém o mesmo rodapé em todas as páginas) -->
<%- include("../partials/footer") %>
